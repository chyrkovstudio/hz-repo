= Partition pruning of SQL queries
:description: Use partition pruning optimization technique to reduce latency for quick IMap SQL queries.
:page-beta: false

Partition pruning is an IMap-specific query optimization technique that automatically prunes members which don't contain
the required data on their partitions, and optimize count of Jet scan processors on required members. It works

* by default, for primitive `__key` types (default attribute strategy);
* for all key types if user configure attribute partitioning strategy for `MapConfig`.

Worth noticing, the query coordinator member is always involved in the query execution, even if it doesn't contain any
required data.

== Limitations

Partition pruning is only available for querying IMap with enabled attribute partitioning strategy.

== Example

[source,java]
----
String mapName = "map";
hz.addMapConfig(new MapConfig(mapName).setPartitioningAttributeConfigs("k2"));

IMap<ComplexKey, String> map = hz.getMap(mapName);
map.put(new ComplexKey("k1", 21), "v1");
map.put(new ComplexKey("k2", 42), "v2");
----

[source,sql]
----
-- Create a mapping to observe IMap in SQL context;
CREATE MAPPING map (k1 VARCHAR, k2 INT, v VARCHAR)
TYPE IMap
OPTIONS ('keyFormat' = 'java', 'valueFormat' = 'varchar');

-- Query IMap with a predicate allowing partition pruning;
SELECT * FROM cities WHERE k2 = 42;
----
